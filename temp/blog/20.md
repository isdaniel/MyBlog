---
title: 從Asp.net框架角度進入Asp.net MVC原始碼－Model(ValidationAttribute) (第20天)
date: 
tags: [C#,Asp.net,Asp.net-MVC,SourceCode]
categories: [C#]
---

# Agenda<!-- omit in toc -->
- [前言](#%e5%89%8d%e8%a8%80)
- [ValidationAttribute](#validationattribute)
- [DataAnnotationsModelValidator](#dataannotationsmodelvalidator)
- [ModelValidatorProviders](#modelvalidatorproviders)
- [DataAnnotationsModelValidationFactory](#dataannotationsmodelvalidationfactory)
- [ModelValidator](#modelvalidator)
- [ModelValidatorProviderCollection 驗證](#modelvalidatorprovidercollection-%e9%a9%97%e8%ad%89)

## 前言



## ValidationAttribute

`ValidationAttribute`類別在`System.ComponentModel.DataAnnotations`命名空間下.

我們可以建立一個類別繼承`ValidationAttribute`並`bool IsValid(object value)`重載方法來製做我們客制化驗證機制.

`IsValid`方法有一個`Bool`回傳值回傳`true`代表驗證通過`false`反之

```csharp
public abstract class ValidationAttribute : Attribute{
    //...
    public virtual bool IsValid(object value)
    {
    
    }
	//....
}
```



* `RegularExpressionAttribute`
* `StringLengthAttribute`
* `RangeAttribute`

## DataAnnotationsModelValidator

## ModelValidatorProviders

```csharp
public static class ModelValidatorProviders
{
	private static readonly ModelValidatorProviderCollection _providers = new ModelValidatorProviderCollection()
	{
		new DataAnnotationsModelValidatorProvider(),
		new DataErrorInfoModelValidatorProvider(),
		new ClientDataTypeModelValidatorProvider()
	};

	public static ModelValidatorProviderCollection Providers
	{
		get { return _providers; }
	}
}
```

## DataAnnotationsModelValidationFactory

## ModelValidator

## ModelValidatorProviderCollection 驗證


ModelMetaData

```csharp
public virtual IEnumerable<ModelValidator> GetValidators(ControllerContext context)
{
    return ModelValidatorProviders.Providers.GetValidators(this, context);
}
```
